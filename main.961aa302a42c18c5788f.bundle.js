(()=>{"use strict";var t,e={502:(t,e,s)=>{var i,a=s(260);!function(t){t.MENU="MenuScene",t.GAMEPLAY="GamePlayScene",t.INIT="InitScene",t.GAMEOVER="GameOverScene",t.LOADING="LoadingScene"}(i||(i={}));const h='"KitschyRetroRegular-9YnqB"',r=["assets/coin/patterns/coinPattern0.txt","assets/coin/patterns/coinPattern1.txt","assets/coin/patterns/coinPattern2.txt","assets/coin/patterns/coinPattern3.txt","assets/coin/patterns/coinPattern4.txt","assets/coin/patterns/coinPattern5.txt","assets/coin/patterns/coinPattern6.txt","assets/coin/patterns/coinPattern7.txt","assets/coin/patterns/coinPattern8.txt","assets/coin/patterns/coinPattern9.txt"];var n,o,l,c,p;!function(t){t.BARRY_SPRITE_SHEET="assets/barry/spritesheet.png",t.BARRY_BODY="assets/Characters/Barry/defaultBody.png",t.BARRY_HEAD="assets/Characters/Barry/defaultHead.png",t.BULLET_FLASH="assets/bullet/bullet-flash.png",t.EXPLOSION="assets/bullet/explosion-sprite.png",t.ORB_ANIM="assets/zap/orbAnim.png",t.GLOW="assets/zap/glow.png",t.ZAP_EFFECT="assets/zap/zapEffect.png",t.ZAP_SPRITE="assets/zap/spritesheet.png",t.COIN_SPRITE="assets/coin/coin-sprite.png",t.ALARM_LIGHT_EFFECT="assets/bg/Levels/Title/alarmGlow_TVOS.png",t.ROCKET="assets/missile/missile.png",t.ROCKET_ALERT="assets/missile/missileAlert.png",t.ROCKET_EFFECT="assets/missile/missileEffects.png",t.ROCKET_EXPLOSION="assets/missile/missileExplosion.png",t.WORKER_1_BODY="assets/workers/worker1Body.png",t.WORKER_1_HEAD="assets/workers/worker1Head.png",t.WORKER_2_BODY="assets/workers/worker2Body.png",t.WORKER_2_HEAD="assets/workers/worker2Head.png",t.WORKER_FAT_BODY="assets/workers/workerFatBody.png",t.WORKER_TALL_BODY="assets/workers/workerTallBody.png"}(n||(n={})),function(t){t.BULLET="assets/bullet/1.png",t.COIN="assets/coin/1.png",t.BUTTON_BACKING="assets/UI/buttonBacking.png",t.TITLE="assets/bg/Levels/Title/Objects/title_small.png",t.TITLE_GLOW="assets/bg/Levels/Title/Objects/titleGlow_small.png",t.LOGO2="assets/logo2.jpg",t.START_ROOM_1="assets/bg/Levels/Title/start1.png",t.START_ROOM_2="assets/bg/Levels/Title/start2.png",t.START_ROOM="assets/bg/start.png",t.MID_ROOM="assets/bg/mid1.png",t.AQUA_ROOM="assets/bg/atlas/aquarium_assets.png",t.ALARM_LIGHT="assets/bg/Levels/Title/alarmLight_TVOS.png",t.BEST_SCREEN="assets/bg/Levels/Title/bestScreen.png",t.LIGHT="assets/bg/Levels/Title/title_light_TVOS.png",t.LIGHT_EFFECT_1="assets/bg/Levels/Title/lightEffect.png",t.LIGHT_EFFECT_2="assets/bg/Levels/Title/lightEffect2.png",t.TABLE="assets/bg/Levels/Title/table.png",t.RADIO="assets/bg/Levels/Title/radio.png",t.SMOKE="assets/bg/particles/smoke.png",t.DO_NOT_TOUCH="assets/bg/Levels/Title/doNotTouchSign_TVOS.png"}(o||(o={})),function(t){t.COIN_COLLECT_1="assets/SFX/Coin/coin_pickup_1.mp3",t.COIN_COLLECT_2="assets/SFX/Coin/coin_pickup_2.mp3",t.COIN_COLLECT_3="assets/SFX/Coin/coin_pickup_3.mp3"}(l||(l={})),function(t){t[t.BACKGROUND_VERYLOW=0]="BACKGROUND_VERYLOW",t[t.BACKGROUND_LOW=1]="BACKGROUND_LOW",t[t.BACKGROUND_MEDIUM=2]="BACKGROUND_MEDIUM",t[t.BACKGROUND_HIGH=3]="BACKGROUND_HIGH",t[t.BACKGROUND_VERYHIGH=4]="BACKGROUND_VERYHIGH",t[t.OBJECT_VERYLOW=5]="OBJECT_VERYLOW",t[t.OBJECT_LOW=6]="OBJECT_LOW",t[t.OBJECT_MEDIUM=7]="OBJECT_MEDIUM",t[t.OBJECT_HIGH=8]="OBJECT_HIGH",t[t.OBJECT_VERYHIGH=9]="OBJECT_VERYHIGH"}(c||(c={}));class d{constructor(t,e,s,i,a,h="",r){i&&a&&(this.rectangle=t.add.nineslice(e,s,o.BUTTON_BACKING,void 0,i,a,10,10).setDisplaySize(i,a).setDepth(c.OBJECT_MEDIUM)),this.text=t.add.text(e,s,h,r).setOrigin(.5,.5).setStroke("#000000",3).setDepth(c.OBJECT_MEDIUM),this.isPointerDown=!1,this.isPointerOver=!1,this.blackRect=t.add.rectangle(e,s,i,a,0,1).setDisplaySize(i,a).setSize(i,a).setAlpha(0).setDepth(c.OBJECT_MEDIUM),this.rectangle.setInteractive()}setInteractive(){this.rectangle.on("pointerdown",(()=>this.handlePointerDown(this))),this.rectangle.on("pointerup",(()=>this.handlePointerUp(this))),this.rectangle.on("pointerover",(()=>this.handlePointerOver(this))),this.rectangle.on("pointerout",(()=>this.handlePointerOut(this)))}handlePointerDown(t){this.isPointerDown=!0,t.blackRect.setAlpha(.5)}handlePointerUp(t){this.isPointerDown=!1,t.blackRect.setAlpha(0)}handlePointerOver(t){this.isPointerOver=!0,t.blackRect.setAlpha(.5)}handlePointerOut(t){this.isPointerOver=!1,t.blackRect.setAlpha(0)}getIsPointerDown(){return this.isPointerDown}getIsPointerOver(){return this.isPointerOver}getRectangle(){return this.rectangle}getText(){return this.text}}class m extends a.Scene{constructor(){super({key:i.GAMEOVER})}init(t){this.score=t.score,this.coin=t.coin}preload(){}create(){this.add.rectangle(0,0,3200,1600,0).setOrigin(0,0).setAlpha(.5),this.add.rectangle(2100,150,950,1250,9085376).setOrigin(.5,0),this.add.rectangle(2100,150,930,1240,2370630).setOrigin(.5,0),this.add.rectangle(2100,150,1e3,100,5726049),this.add.nineslice(2100,150,o.BUTTON_BACKING,void 0,1e3,50),this.add.text(2100,150,"RESULTS",{fontSize:"80px",fontStyle:"bold"}).setOrigin(.5,.5).setStroke("#000000",1),this.add.text(2100,275,"DISTANCE",{fontSize:"80px",fontStyle:"bold"}).setOrigin(.5,.5).setStroke("#000000",1),this.add.text(2100,400,`${Math.floor(this.score)}M`,{fontSize:"125px",fontStyle:"bold",color:"#fef03b"}).setOrigin(.5,.5).setStroke("#000000",1),this.add.text(1700,600,"COLLECTED",{fontSize:"60px",fontStyle:"bold"}).setOrigin(0,.5).setStroke("#000000",1),this.add.text(2450,600,`${this.coin}`,{fontSize:"60px",color:"#fef03b",fontStyle:"bold"}).setOrigin(1,.5).setStroke("#000000",1),this.add.image(2500,600,o.COIN).setDisplaySize(60,60),this.playAgainBtn=new d(this,2100,800,650,200,"PLAY AGAIN",{color:"#ffffff",fontSize:"80px",fontStyle:"bold"}),this.playAgainBtn.setInteractive(),this.homeBtn=new d(this,2100,1100,650,200,"HOME",{color:"#ffffff",fontSize:"80px",fontStyle:"bold"}),this.homeBtn.setInteractive()}update(){this.homeBtn.getIsPointerDown()?(this.scene.stop(i.GAMEPLAY),this.scene.start(i.MENU)):this.playAgainBtn.getIsPointerDown()&&(this.scene.stop(i.GAMEPLAY),this.scene.start(i.GAMEPLAY))}}!function(t){t[t.MOVE=0]="MOVE",t[t.RUN=1]="RUN",t[t.DEAD=2]="DEAD"}(p||(p={}));class g{constructor(t,e,s,i=n.WORKER_2_HEAD,a=n.WORKER_2_BODY){this.scene=t,this.body=this.scene.matter.add.sprite(e,s+43,a,void 0).setDepth(c.OBJECT_MEDIUM).setScale(4).setFixedRotation().setCollisionGroup(-2),this.head=this.scene.matter.add.sprite(e,s,i,void 0).setDepth(c.OBJECT_MEDIUM).setScale(4).setFixedRotation().setCollisionGroup(-2),this.scene.anims.exists(a+"move")||this.scene.anims.create({key:a+"move",frames:this.body.anims.generateFrameNumbers(a,{start:0,end:3}),frameRate:10,repeat:-1}),this.scene.anims.exists(i+"move")||this.scene.anims.create({key:i+"move",frames:this.head.anims.generateFrameNumbers(i,{start:0,end:3}),frameRate:10,repeat:-1}),this.scene.anims.exists(a+"run")||this.scene.anims.create({key:a+"run",frames:this.body.anims.generateFrameNumbers(a,{start:4,end:7}),frameRate:10,repeat:-1}),this.scene.anims.exists(i+"run")||this.scene.anims.create({key:i+"run",frames:this.head.anims.generateFrameNumbers(i,{start:4,end:7}),frameRate:10,repeat:-1}),this.velocity=(Math.random()-.5)/2,this.velocity<0?this.velocity-=.1:this.velocity+=.1,this.state=p.MOVE,this.state==p.MOVE?(this.head.play(i+"move"),this.body.play(a+"move")):this.state==p.RUN&&(this.head.play(i+"run"),this.body.play(a+"run")),this.headKey=i,this.bodyKey=a,this.velocity<0?(this.body.setFlipX(!0),this.head.setFlipX(!0)):(this.body.setFlipX(!1),this.head.setFlipX(!1))}update(t,e){var s,i;if(this.state==p.DEAD)return this.head.setTexture(this.headKey,13),void this.body.setTexture(this.bodyKey,13);this.state==p.MOVE?((null===(s=this.head.anims.currentAnim)||void 0===s?void 0:s.key)!=this.headKey+"move"&&(this.head.play(this.headKey+"move"),this.body.play(this.bodyKey+"move")),this.body.x+=this.velocity*t):this.state==p.RUN&&((null===(i=this.head.anims.currentAnim)||void 0===i?void 0:i.key)!=this.headKey+"run"&&(this.head.play(this.headKey+"run"),this.body.play(this.bodyKey+"run")),this.body.x+=this.velocity*t*1.5),this.head.x=this.body.x,this.head.y=this.body.y-43,Math.abs(e.x-this.body.x)<300&&(this.state=p.RUN)}handleCollider(t){if(this.state==p.DEAD)return;const e=t.getBullets();for(let t=0;t<e.length;t++)if(this.scene.matter.overlap(e[t],this.getBody())){this.state=p.DEAD;break}}getBody(){return[this.head,this.body]}setAll(t,e,s,i=n.WORKER_2_HEAD,a=n.WORKER_2_BODY){this.scene=t,this.body.x=e,this.head.x=e,this.body.y=s+43,this.head.y=s,this.headKey=i,this.bodyKey=a,this.head.setTexture(i),this.body.setTexture(a),this.scene.anims.exists(a+"move")||this.scene.anims.create({key:a+"move",frames:this.body.anims.generateFrameNumbers(a,{start:0,end:3}),frameRate:10,repeat:-1}),this.scene.anims.exists(i+"move")||this.scene.anims.create({key:i+"move",frames:this.head.anims.generateFrameNumbers(i,{start:0,end:3}),frameRate:10,repeat:-1}),this.scene.anims.exists(a+"run")||this.scene.anims.create({key:a+"run",frames:this.body.anims.generateFrameNumbers(a,{start:4,end:7}),frameRate:10,repeat:-1}),this.scene.anims.exists(i+"run")||this.scene.anims.create({key:i+"run",frames:this.head.anims.generateFrameNumbers(i,{start:4,end:7}),frameRate:10,repeat:-1}),this.velocity=(Math.random()-.5)/2,this.velocity<0?this.velocity-=.1:this.velocity+=.1,this.state=p.MOVE,this.velocity<0?(this.body.setFlipX(!0),this.head.setFlipX(!0)):(this.body.setFlipX(!1),this.head.setFlipX(!1))}getMaxX(){return this.body.x+this.body.width}}class u extends Phaser.Physics.Matter.Sprite{constructor(t,e,s,i){super(t.matter.world,e,s,i),this.setDisplaySize(24,62.4).setDepth(c.OBJECT_LOW).setCollisionGroup(-2),t.add.existing(this),this.setAll(t,e,s,i)}setAll(t,e,s,i){if(this.setRotation(0).setFixedRotation().setPosition(e+Phaser.Math.Between(-15,15),s).setTexture(i),this.body){const t=Phaser.Math.Between(-10,10),e=30;this.setVelocityY(e),this.setVelocityX(t),t>0?this.setRotation(Math.atan(e/t)-Math.PI/2):t<0&&this.setRotation(Math.atan(e/t)+Math.PI/2)}}}class y extends Phaser.GameObjects.Sprite{constructor(t,e,s,i){super(t,e,s,i),this.setDepth(c.OBJECT_MEDIUM).setDisplaySize(110,92),t.add.existing(this),this.scene.anims.exists("explosion")||this.scene.anims.create({key:"explosion",frames:this.anims.generateFrameNumbers(i,{start:0,end:3}),frameRate:40,repeat:1}),this.setAll(t,e,s,i)}setAll(t,e,s,i){this.setPosition(e,s+Phaser.Math.Between(-10,20)).setTexture(i).setAlpha(1),t.add.existing(this),this.anims.play("explosion"),t.tweens.add({targets:this,alpha:0,duration:100})}}class O{constructor(t,e,s,i=1){this.scene=t,this.coinPatternIdx=i,i>=r.length&&(i=0);const a=this.scene.cache.text.get(`pattern${i}`);let h=0,o=0;const p=70,d=this.scene.add.sprite(-20,-20,n.COIN_SPRITE);this.scene.anims.exists("turn")||this.scene.anims.create({key:"turn",frames:d.anims.generateFrameNumbers(n.COIN_SPRITE,{start:0,end:7}),frameRate:10,repeat:-1}),this.coins=[],this.minX=e,this.maxX=e,this.minY=s,this.maxY=s;for(let t=0;t<a.length;t++)"\n"!=a[t]?("1"==a[t]&&(this.coins.push(this.scene.matter.add.sprite(e+o*p,s+h*p,n.COIN_SPRITE,0,{isStatic:!0}).setDisplaySize(50,50).play("turn").setCollisionGroup(-2).setDepth(c.OBJECT_LOW)),this.minX=Math.min(this.minX,e+o*p),this.maxX=Math.max(this.maxX,e+o*p),this.minY=Math.min(this.minY,s+h*p),this.maxY=Math.max(this.maxY,s+h*p)),o++):(h++,o=0);O.sound1||(O.sound1=this.scene.sound.add(l.COIN_COLLECT_1).setVolume(.5)),O.sound2||(O.sound2=this.scene.sound.add(l.COIN_COLLECT_2).setVolume(.5)),O.sound3||(O.sound3=this.scene.sound.add(l.COIN_COLLECT_3).setVolume(.5)),O.sound1.stop(),O.sound2.stop(),O.sound3.stop()}update(t,e){}handleColliderWithPlayer(t,e){const s=100;if(!(t.x-s>this.maxX+this.coins[0].width/2||t.x+s<this.minX-this.coins[0].width/2||t.y+s<this.minY-this.coins[0].height/2||t.y-s>this.maxY+this.coins[0].height/2))for(let s=0;s<this.coins.length;s++)this.scene.matter.overlap(t,[this.coins[s]])&&this.coins[s].visible&&(this.coins[s].setVisible(!1),e.addCoin(),O.playSound())}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}setVisible(t){for(let e=0;e<this.coins.length;e++)this.coins[e].setVisible(t);return this}setAll(t,e,s){this.scene=t;const i=this.scene.cache.text.get(`pattern${this.coinPatternIdx}`);let a=0,h=0;const r=70;this.minX=e,this.maxX=e,this.minY=s,this.maxY=s;let n=0;for(let t=0;t<i.length;t++)"\n"!=i[t]?("1"==i[t]&&(this.coins[n++].setPosition(e+h*r,s+a*r).play("turn").setCollisionGroup(-2).setVisible(!0),this.minX=Math.min(this.minX,e+h*r),this.maxX=Math.max(this.maxX,e+h*r),this.minY=Math.min(this.minY,s+a*r),this.maxY=Math.max(this.maxY,s+a*r)),h++):(a++,h=0);return this}static playSound(){O.sound1.play()}}class R{constructor(t){this.scene=t}update(t){}reset(t){}maxX(){return 0}maxY(){return 0}minX(){return 0}minY(){return 0}getBody(){return[this.rect]}}class E extends R{constructor(t,e,s){super(t),this.rect=this.scene.matter.add.sprite(e,s,n.ROCKET,void 0,{isStatic:!0}).setScale(3).setRectangle(85,50).setStatic(!0).setDepth(c.OBJECT_MEDIUM).setCollisionGroup(-2),this.scene.anims.exists("rocket-turn")||this.scene.anims.create({key:"rocket-turn",frames:this.rect.anims.generateFrameNumbers(n.ROCKET,{start:0,end:3}),frameRate:10,repeat:-1}),this.rect.anims.play("rocket-turn"),this.fire=this.scene.matter.add.sprite(e+80,s,n.ROCKET_EFFECT,void 0,{isStatic:!0}).setDepth(c.OBJECT_MEDIUM).setScale(2).setRectangle(85,50).setStatic(!0).setCollisionGroup(-2),this.scene.anims.exists("rocket-fire")||this.scene.anims.create({key:"rocket-fire",frames:this.rect.anims.generateFrameNumbers(n.ROCKET_EFFECT,{start:0,end:3}),frameRate:10,repeat:-1}),this.fire.anims.play("rocket-fire"),this.alert=this.scene.add.sprite(e,s,n.ROCKET_ALERT).setDepth(c.OBJECT_MEDIUM).setScale(2.5),this.scene.anims.exists("alert")||this.scene.anims.create({key:"alert",frames:this.alert.anims.generateFrameNumbers(n.ROCKET_ALERT,{start:0,end:7}),frameRate:5,repeat:0}),this.speed=Phaser.Math.Between(10,20),this.moveY=Phaser.Math.Between(1,9),this.isWaiting=!1}update(t,e=void 0){if(this.isWaiting&&this.alert.anims.isPlaying){const t=this.moveY;e&&(Math.abs(e.y-this.alert.y)<t&&(this.alert.y=e.y),e.y>this.alert.y?this.alert.y+=t:e.y<this.alert.y&&(this.alert.y-=t)),this.alert.x=this.scene.cameras.main.scrollX+3150,this.rect.y=this.fire.y=this.alert.y,this.rect.x=this.alert.x+100,this.fire.x=this.alert.x+100+80}this.isWaiting&&!this.alert.anims.isPlaying&&(this.rect.visible||(this.rect.setVisible(!0),this.fire.setVisible(!0),this.alert.setVisible(!1)),this.rect.x-=this.speed,this.fire.x-=this.speed)}reset(t){this.rect.x=t+100,this.fire.x=t+80+100,this.alert.x=t;const e=Phaser.Math.Between(400,600);this.rect.y=e,this.fire.y=e,this.alert.y=e,this.isWaiting=!1,this.speed=Phaser.Math.Between(10,20),this.moveY=Phaser.Math.Between(1,9),this.rect.setVisible(!1),this.fire.setVisible(!1),this.alert.setVisible(!0)}maxX(){return this.fire.x+this.fire.width}maxY(){return this.fire.y+this.fire.height}minX(){return this.rect.x}minY(){return this.rect.y}getBody(){return[this.rect,this.fire]}startAlert(){this.alert.play("alert"),this.isWaiting=!0}setAll(t,e,s){this.scene=t,this.rect.x=e+100,this.fire.x=e+80+100,this.alert.x=e,this.rect.y=s,this.fire.y=s,this.alert.y=s,this.speed=Phaser.Math.Between(10,20),this.moveY=Phaser.Math.Between(1,9),this.isWaiting=!1,this.rect.setVisible(!1),this.fire.setVisible(!1),this.alert.setVisible(!0)}}class f extends R{constructor(t,e,s,i,a){super(t),this.sprite1=t.matter.add.sprite(e,s,n.ORB_ANIM,0,{isStatic:!0}).setCircle(30).setDisplaySize(124,84).setStatic(!0).setDepth(c.OBJECT_HIGH).setCollisionGroup(-2),this.sprite1.anims.create({key:"turn1",frames:this.sprite1.anims.generateFrameNumbers(n.ORB_ANIM,{start:0,end:2}),frameRate:10,repeat:-1}),this.sprite2=t.matter.add.sprite(i,a,n.ORB_ANIM,0,{isStatic:!0}).setCircle(30).setDisplaySize(124,84).setStatic(!0).setDepth(c.OBJECT_HIGH).setCollisionGroup(-2),this.sprite2.anims.create({key:"turn2",frames:this.sprite2.anims.generateFrameNumbers(n.ORB_ANIM,{start:0,end:2}),frameRate:10,repeat:-1}),this.glow1=t.add.sprite(e,s,n.GLOW,0).setDepth(c.BACKGROUND_MEDIUM).setDisplaySize(230,230),this.glow1.anims.create({key:"bloom1",frames:this.glow1.anims.generateFrameNumbers(n.GLOW,{start:0,end:15}),frameRate:10,repeat:-1}),this.glow2=t.add.sprite(i,a,n.GLOW,0).setDepth(c.BACKGROUND_MEDIUM).setDisplaySize(230,230),this.glow2.anims.create({key:"bloom2",frames:this.glow2.anims.generateFrameNumbers(n.GLOW,{start:0,end:15}),frameRate:10,repeat:-1}),this.rect=t.matter.add.sprite((e+i)/2,(s+a)/2,n.ZAP_EFFECT,0,{isStatic:!0}).setOrigin(.5,.5).setDepth(c.OBJECT_LOW).setRotation(0).setCollisionGroup(-2),this.rect.anims.create({key:"electric",frames:this.rect.anims.generateFrameNumbers(n.ZAP_EFFECT,{start:0,end:3}),frameRate:10,repeat:-1}),this.sprite1.anims.play("turn1"),this.sprite2.anims.play("turn2"),this.glow1.anims.play("bloom1"),this.glow2.anims.play("bloom2"),this.rect.play("electric")}update(t){if(this.sprite1.x>this.sprite2.x){let t=this.sprite1.x;this.sprite1.x=this.sprite2.x,this.sprite2.x=t,t=this.sprite1.y,this.sprite1.y=this.sprite2.y,this.sprite2.y=t}if(this.isSpin){let e=(this.sprite1.x+this.sprite2.x)/2,s=(this.sprite1.y+this.sprite2.y)/2,i=this.sprite1.x,a=this.sprite1.y,h=this.sprite2.x,r=this.sprite2.y;const n=1e-4;this.sprite1.x=e+(i-e)*Math.cos(t*n*Math.PI)-(a-s)*Math.sin(t*n*Math.PI),this.sprite1.y=s+(i-e)*Math.sin(t*n*Math.PI)+(a-s)*Math.cos(t*n*Math.PI),this.sprite2.x=e+(h-e)*Math.cos(t*n*Math.PI)-(r-s)*Math.sin(t*n*Math.PI),this.sprite2.y=s+(h-e)*Math.sin(t*n*Math.PI)+(r-s)*Math.cos(t*n*Math.PI),e=(this.sprite1.x+this.sprite2.x)/2,s=(this.sprite1.y+this.sprite2.y)/2,i=this.sprite1.x,a=this.sprite1.y,h=this.sprite2.x,r=this.sprite2.y,h==i&&(h+=1e-11),this.sprite1.setRotation(Math.PI/2+Math.atan((r-a)/(h-i))),this.sprite2.setRotation(-Math.PI/2+Math.atan((r-a)/(h-i))),this.glow1.setRotation(Math.PI/2+Math.atan((r-a)/(h-i))),this.glow2.setRotation(-Math.PI/2+Math.atan((r-a)/(h-i)))}this.updateRect(),this.updateGlow()}updateGlow(){this.glow1.x=this.sprite1.x,this.glow1.y=this.sprite1.y,this.glow2.x=this.sprite2.x,this.glow2.y=this.sprite2.y}updateRect(){this.rect.x=(this.sprite1.x+this.sprite2.x)/2,this.rect.y=(this.sprite1.y+this.sprite2.y)/2,this.rect.setRotation(0);let t=0;0==Math.sqrt(Math.pow(this.sprite1.x-this.sprite2.x,2)+Math.pow(this.sprite1.y-this.sprite2.y,2))&&(t=1e-4),this.rect.setDisplaySize(Math.sqrt(Math.pow(this.sprite1.x-this.sprite2.x,2)+Math.pow(this.sprite1.y-this.sprite2.y,2))+t,100).setRectangle(Math.sqrt(Math.pow(this.sprite1.x-this.sprite2.x,2)+Math.pow(this.sprite1.y-this.sprite2.y,2))+t,50).setCollisionGroup(-2),t=0,this.sprite2.x-this.sprite1.x==0&&(t=1e-4),this.rect.setRotation(Math.atan((this.sprite2.y-this.sprite1.y)/(this.sprite2.x-this.sprite1.x+t)))}reset(t){const e=t+Phaser.Math.Between(0,300),s=e+Phaser.Math.Between(200,500),i=Phaser.Math.Between(600,1100);let a=Phaser.Math.Between(600,500);switch(Phaser.Math.Between(0,4)){case 0:a=1250;break;case 1:a=300}this.sprite1.setRotation(Math.PI/2+Math.atan((a-i)/(s-e))),this.sprite2.setRotation(-Math.PI/2+Math.atan((a-i)/(s-e))),this.setAll(this.scene,e,i,s,a),10==Phaser.Math.Between(0,10)?this.isSpin=!0:this.isSpin=!1}maxX(){return this.sprite2.x>this.sprite1.x?this.sprite2.x:this.sprite1.x}minX(){return this.sprite2.x<this.sprite1.x?this.sprite2.x:this.sprite1.x}maxY(){return this.sprite2.y>this.sprite1.y?this.sprite2.y:this.sprite1.y}minY(){return this.sprite2.y<this.sprite1.y?this.sprite2.y:this.sprite1.y}getBody(){return[this.sprite1,this.sprite2,this.rect]}setAll(t,e,s,i,a){if(e>i){let t=e;e=i,i=t,t=s,s=a,a=t}this.sprite1.x=e,this.sprite2.x=i,this.sprite1.y=s,this.sprite2.y=a,this.updateRect(),this.updateGlow(),10==Phaser.Math.Between(0,10)?this.isSpin=!0:this.isSpin=!1}}class x{static init(t){x.clear();for(let e=0;e<0;e++)x.removeBullet(new u(t,100,100,o.BULLET)),x.removeExplosion(new y(t,100,100,n.EXPLOSION)),x.removeZap(new f(t,-100,-100,-100,-100)),x.removeRocket(new E(t,-100,-100));const e=[];for(let t=0;t<r.length;t++)e.push(t);e.sort(((t,e)=>Math.random()-.5));for(let s=0;s<r.length;s++){const i=new O(t,110,110,e[s]).setVisible(!1);x.coins.push(i)}}static getBullet(t,e,s,i){if(x.bullets.length>0){const a=x.bullets.pop();return a.setVisible(!0).setAll(t,e,s,i),a}return x.count++,new u(t,e,s,i)}static removeBullet(t){t.setVisible(!1),x.bullets.push(t)}static getExplosion(t,e,s,i){if(x.explosions.length>0){const a=x.explosions.pop();return a.setVisible(!0).setAll(t,e,s,i),a}return x.count++,new y(t,e,s,i)}static removeExplosion(t){t.setVisible(!1),x.explosions.push(t)}static getZap(t,e,s,i,a){if(x.zaps.length>0){const h=x.zaps.pop();return h.setAll(t,e,s,i,a),h}return x.count++,new f(t,e,s,i,a)}static removeZap(t){x.zaps.push(t)}static removeObstacle(t){t instanceof f&&x.removeZap(t)}static clear(){x.bullets=[],x.explosions=[],x.count=0,x.rockets=[],x.zaps=[],x.coins=[],x.workers=[]}static getCoin(t,e,s){if(x.coins.length>0){const i=x.coins.pop();return i.setAll(t,e,s),i}return x.count++,new O(t,e,s,0)}static removeCoin(t){x.coins.push(t)}static getRocket(t,e,s){if(x.rockets.length>0){const i=x.rockets.pop();return i.setAll(t,e,s),i}return x.count++,new E(t,e,s)}static removeRocket(t){x.rockets.push(t)}static getWorker(t,e,s){let i=n.WORKER_1_HEAD,a=n.WORKER_1_BODY;switch(i=Phaser.Math.Between(0,1)%2?n.WORKER_1_HEAD:n.WORKER_2_HEAD,Phaser.Math.Between(0,2)){case 0:a=n.WORKER_1_BODY;break;case 1:a=n.WORKER_2_BODY;break;case 2:a=n.WORKER_FAT_BODY}if(x.workers.length>0){const h=x.workers.pop();return h.setAll(t,e,s,i,a),h}return x.count++,new g(t,e,s,i,a)}static removeWorker(t){x.workers.push(t)}}x.bullets=[],x.explosions=[],x.zaps=[],x.count=0,x.coins=[],x.rockets=[],x.workers=[];class _ extends a.Physics.Matter.Sprite{constructor(t,e,s,i){super(t.matter.world,e,s,i),this.setDisplaySize(140,160).setRectangle(80,150).setFixedRotation().setCollisionGroup(-2).setDepth(c.OBJECT_VERYHIGH).setOrigin(.65,.5),this.isFlying=!1,this.scene.anims.exists("move")||this.scene.anims.create({key:"move",frames:this.anims.generateFrameNumbers(i,{start:0,end:1}),frameRate:10,repeat:-1}),this.scene.anims.exists("fly")||this.scene.anims.create({key:"fly",frames:this.anims.generateFrameNumbers(i,{start:3,end:3}),frameRate:10,repeat:1}),this.scene.anims.exists("fall")||this.scene.anims.create({key:"fall",frames:this.anims.generateFrameNumbers(i,{start:2,end:2}),frameRate:10,repeat:1}),this.anims.play("fall"),this.scene.add.existing(this),this.bullets=[],this.explosions=[],this.delayFire=5,this.speed=.5,this.bulletFlash=this.scene.add.sprite(e,s,n.BULLET_FLASH).setDisplaySize(150,150),this.scene.anims.exists("flash")||this.scene.anims.create({key:"flash",frames:this.bulletFlash.anims.generateFrameNumbers(n.BULLET_FLASH,{start:0,end:3}),frameRate:10,repeat:-1}),this.bulletFlash.play("flash")}update(t){var e;super.update(),this.x+=t*this.speed,this.body&&(Math.floor(100*Math.abs(this.body.velocity.y))/100==0&&"move"!=(null===(e=this.anims.currentAnim)||void 0===e?void 0:e.key)?this.moving():this.isFlying?this.flying():this.falling());for(let e=0;e<this.getBullets().length;e++){this.bullets[e].update(t);const s=this.scene;s.matter.overlap(this.bullets[e],[s.ground])&&(this.explosions.push(x.getExplosion(this.scene,this.bullets[e].x,this.bullets[e].y,n.EXPLOSION)),x.removeBullet(this.bullets[e]),this.bullets.splice(e,1),e--)}let s=0;for(let t=0;t<this.explosions.length&&0==this.explosions[t].alpha;t++)x.removeExplosion(this.explosions[t]),s++;s>0&&this.explosions.splice(0,s),this.y<=300&&(this.y=300),this.bulletFlash.setPosition(this.x-11,this.y+135)}fireBullet(){this.delayFire+=.5,this.delayFire>=5&&(this.bullets.push(x.getBullet(this.scene,this.x-10,this.y+95,o.BULLET)),this.delayFire-=5)}flying(){this.body&&(this.body.position.y<=0?this.body.position.y=0:(this.getVelocity()&&(this.getVelocity()&&this.getVelocity().y>-10?this.setVelocityY(Number(this.getVelocity().y)-.5):this.setVelocityY(-10)),this.isFlying=!0,this.anims.play("fly"))),this.fireBullet(),this.bulletFlash.setVisible(!0)}falling(){this.body&&this.isFlying&&(this.setVelocityY(-5),this.isFlying=!1,this.anims.play("fall")),this.bulletFlash.setVisible(!1)}moving(){this.anims.play("move")}getBullets(){return this.bullets}getSpeed(){return this.speed}setSpeed(t){this.speed=t}}class S extends Phaser.GameObjects.Text{constructor(t){super(t,0,60,"0",{}),this.scene.add.existing(this),this.setFontSize("80px"),this.setColor("#ffffff"),this.setFontFamily(h),this.setStroke("#000000",5),this.setDepth(c.OBJECT_VERYLOW),this.highScoreText=this.scene.add.text(0,150,"0"),this.highScoreText.setFontSize("80px"),this.highScoreText.setAlign("right"),this.highScoreText.setColor("#ffffff"),this.highScoreText.setFontFamily(h),this.highScoreText.setStroke("#000000",5),this.highScoreText.setDepth(c.OBJECT_VERYLOW),this.score=0,localStorage.getItem("highscore")?this.highScore=Number(localStorage.getItem("highscore")):this.highScore=0,this.level=100}add(t,e=1){this.score+=t*e,this.highScore<this.score&&(this.highScore=this.score),this.setNewScore()}setNewScore(){this.setText(`${Math.floor(this.score)}m`),this.x=this.scene.cameras.main.scrollX,this.highScoreText.setText(`Best: ${Math.floor(this.highScore)}m`),this.highScoreText.x=this.scene.cameras.main.scrollX+0}resetScore(){this.score=0,this.setNewScore()}getLevel(){return this.level}setLevel(t){this.level=t}getScore(){return this.score}saveHighScore(){localStorage.setItem("highscore",`${this.highScore}`)}}class b{constructor(t,e){this.scene=t,this.position=0,this.image1=this.scene.add.image(this.position,0,e).setOrigin(0,0),this.image2=this.scene.add.image(this.position+this.image1.width,0,e).setOrigin(0,0),this.image3=this.scene.add.image(this.position+this.image1.width,0,e).setOrigin(0,0),this.width=this.image1.width}update(){this.position+this.width<=this.scene.cameras.main.scrollX&&(this.position+=this.width),this.image1.x=this.position,this.image2.x=this.position+this.width,this.image3.x=this.image2.x+this.width}setImage(t,e,s){this.image1=t,this.image2=e,this.image3=s,this.position=t.x,this.width=t.width}setWidth(t){this.width=t}}class T{constructor(t,e){this.coinInRound=0,this.allCoin=0,this.scene=t,this.numCoin=e,this.coins=[];let s=4e3;for(let e=0;e<this.numCoin;e++)this.coins.push(x.getCoin(t,s,Phaser.Math.Between(400,800))),s=this.coins[e].getMaxX()+700;localStorage.getItem("allCoin")?this.allCoin=Number(localStorage.getItem("allCoin")):this.allCoin=0,this.coinInRound=0,this.coinInRoundText=this.scene.add.text(100,240,"0"),this.coinInRoundText.setFontSize("70px"),this.coinInRoundText.setAlign("right"),this.coinInRoundText.setColor("#ffe599"),this.coinInRoundText.setFontFamily(h),this.coinInRoundText.setStroke("#000000",5),this.coinInRoundText.setDepth(c.OBJECT_VERYLOW),this.coinImage=this.scene.add.image(10,250,n.COIN_SPRITE).setOrigin(0,0).setDisplaySize(70,70).setDepth(c.OBJECT_VERYLOW)}update(t,e){let s=0;for(let i=0;i<this.coins.length;i++)this.coins[i].update(t,e),this.coins[i].getMaxX()<this.scene.cameras.main.scrollX&&(x.removeCoin(this.coins[i]),this.coins.splice(i,1),i--,s++);for(let t=0;t<s;t++){const t=x.getCoin(this.scene,this.coins[this.coins.length-1].getMaxX()+700,Phaser.Math.Between(400,800));this.coins.push(t)}}handleColliderWithPlayer(t){for(let e=0;e<this.coins.length;e++)this.coins[e].handleColliderWithPlayer(t,this)}setNewCoin(){this.coinInRoundText.setText(`${this.coinInRound}`),this.coinInRoundText.x=this.scene.cameras.main.scrollX+100,this.coinImage.x=this.scene.cameras.main.scrollX}resetCoint(){this.coinInRound=0}addCoin(t=1){this.coinInRound+=t}saveCoin(){this.allCoin+=this.coinInRound,localStorage.setItem("allCoin",`${this.allCoin}`)}getCoin(){return this.coinInRound}}class M{constructor(t,e){this.scene=t,this.numObstacle=e,this.obstacles=[];let s=3500;for(let i=0;i<e;i++)this.obstacles.push(x.getZap(t,1300,1300,1750,500)),this.obstacles[i].reset(s),s=this.obstacles[i].maxX()+1e3}checkCollider(t){for(let e=0;e<this.obstacles.length;e++){if(this.scene.matter.overlap(t,this.obstacles[e].getBody()))return!0;if(this.obstacles[e].minX()>t.x+t.width/2)break}return!1}update(t){let e=0;for(let e=0;e<this.obstacles.length;e++)this.obstacles[e].update(t);for(let t=0;t<this.obstacles.length&&this.obstacles[t].maxX()+75<this.scene.cameras.main.scrollX;t++)x.removeObstacle(this.obstacles[t]),e++;e&&this.obstacles.splice(0,e);let s=0;for(this.obstacles.length&&(s=this.obstacles[this.obstacles.length-1].maxX());this.obstacles.length<this.numObstacle;){const t=x.getZap(this.scene,0,0,0,0);t.reset(s+Phaser.Math.Between(800,1200)),s=t.maxX(),this.obstacles.push(t)}}}class C{constructor(t,e){this.scene=t,this.rockets=[],this.rocketIdx=[];let s=5e3;for(let t=0;t<e;t++)this.rocketIdx.push(s),s+=Phaser.Math.Between(5e3,1e4)}checkCollider(t){for(let e=0;e<this.rockets.length;e++)if(this.scene.matter.overlap(t,this.rockets[e].getBody()))return!0;return!1}update(t,e){if(this.rocketIdx[0]<this.scene.cameras.main.scrollX+3200){let t=0;const e=[0,50,20,10,10,10],s=Phaser.Math.Between(1,100);let i=0;for(let a=0;a<e.length;a++)if(i+=e[a],s<=i){t=a;break}for(let e=0;e<t;e++){const t=x.getRocket(this.scene,0,0);t.reset(this.rocketIdx[0]),t.startAlert(),this.rockets.push(t)}this.rocketIdx.splice(0,1),this.rocketIdx.push(this.rocketIdx[this.rocketIdx.length-1]+Phaser.Math.Between(5e3,1e4))}let s=0;for(let i=0;i<this.rockets.length;i++)this.rockets[i].update(t,e),this.rockets[i].maxX()<this.scene.cameras.main.scrollX&&s++;if(s==this.rockets.length){for(let t=0;t<this.rockets.length;t++)x.removeRocket(this.rockets[t]);this.rockets=[]}}}class B{constructor(t,e){this.scene=t,this.workers=[];let s=4e3;for(let i=0;i<e;i++)this.workers.push(x.getWorker(t,s,1200)),s+=Phaser.Math.Between(100,1e3)}update(t,e){let s=0;for(let i=0;i<this.workers.length;i++)this.workers[i].update(t,e),this.workers[i].getMaxX()<this.scene.cameras.main.scrollX&&s++;if(s==this.workers.length){for(let t=0;t<s;t++)x.removeWorker(this.workers[t]);this.workers=[];let t=this.scene.cameras.main.scrollX+3200+Phaser.Math.Between(100,1e3);for(let e=0;e<s;e++)this.workers.push(x.getWorker(this.scene,t,1200)),t+=Phaser.Math.Between(100,1e3)}}handleCollider(t){for(let e=0;e<this.workers.length;e++)this.workers[e].handleCollider(t)}}class I{constructor(t,e,s){t.add.image(e,0,o.START_ROOM).setOrigin(0,.125).setCrop(0,200,1749,1200).setDisplaySize(2332,256e4/1200).setDepth(c.BACKGROUND_VERYHIGH),t.add.image(1600+e,600,o.ALARM_LIGHT).setDepth(c.BACKGROUND_VERYHIGH).setScale(1.5);const i=t.add.sprite(1470+e,710,n.ALARM_LIGHT_EFFECT).setDepth(c.BACKGROUND_VERYHIGH).setScale(1.5);t.anims.exists("alarm-light-turn")||t.anims.create({key:"alarm-light-turn",frames:t.anims.generateFrameNumbers(n.ALARM_LIGHT_EFFECT,{start:0,end:5}),frameRate:5,repeat:-1}),s&&i.play("alarm-light-turn"),t.add.image(1200+e,1150,o.BEST_SCREEN).setDepth(c.BACKGROUND_VERYHIGH).setScale(1.5),t.add.image(500+e,400,o.LIGHT).setDepth(c.BACKGROUND_VERYHIGH).setScale(1.7),t.add.image(510+e,1365,o.LIGHT_EFFECT_1).setDepth(c.BACKGROUND_VERYHIGH).setScale(1.7),t.add.image(500+e,525,o.LIGHT_EFFECT_2).setDepth(c.BACKGROUND_VERYHIGH).setScale(1.7),t.add.image(600+e,1220,o.TABLE).setDepth(c.BACKGROUND_VERYHIGH).setScale(4.4),t.add.image(610+e,1120,o.RADIO).setDepth(c.BACKGROUND_VERYHIGH).setScale(2)}}class w extends a.Scene{constructor(){super({key:i.GAMEPLAY})}preload(){}create(){this.background=new b(this,o.MID_ROOM);const t=this.add.image(1655,0,o.MID_ROOM).setOrigin(0,.125).setCrop(0,200,2021,1200).setDisplaySize(3233600/1200,256e4/1200).setDepth(c.BACKGROUND_MEDIUM),e=this.add.image(4349.666666666666,0,o.MID_ROOM).setOrigin(0,.125).setCrop(0,200,2021,1200).setDisplaySize(3233600/1200,256e4/1200).setDepth(c.BACKGROUND_MEDIUM),s=this.add.image(4349.666666666666,0,o.MID_ROOM).setOrigin(0,.125).setCrop(0,200,2021,1200).setDisplaySize(3233600/1200,256e4/1200).setDepth(c.BACKGROUND_MEDIUM);this.background.setImage(t,e,s),this.background.setWidth(3233600/1200),new I(this,0,!0),this.cameras.main.shake(400,new a.Math.Vector2(.01,.01));for(let t=0;t<1e3;t++){const t=a.Math.Between(1,15),e=a.Math.Between(2e3,2400),s=a.Math.Between(-400,-100),i=a.Math.Between(5,15),h=a.Math.Between(-300,300),r=this.add.image(h,this.evaluateSmokeYPosition(h,s,i),o.SMOKE).setDepth(c.OBJECT_VERYHIGH).setScale(t).setAlpha(Math.random()).setAngle(a.Math.Between(0,360));this.tweens.add({targets:r,x:e,alpha:0,duration:a.Math.Between(2e3,4e3),delay:a.Math.Between(0,100),ease:"Power2",onComplete:()=>{r.destroy()},onUpdate:()=>{r.y=this.evaluateSmokeYPosition(r.x,s,i),r.setScale((e-r.x)/e*t),r.x>=800&&r.y>1250&&(r.alpha=0)}})}const i=this.add.image(370,1300,o.DO_NOT_TOUCH).setDepth(c.OBJECT_VERYHIGH).setScale(1.7);this.tweens.add({targets:i,x:2300,duration:2e3,delay:a.Math.Between(0,100),onUpdate:()=>{i.y=this.evaluateSmokeYPosition(i.x,-200,6.5),i.setAngle(i.x/2400*360+90)}}),x.init(this),this.matter.world.setBounds(0,0,1e3,1600,64,!1,!1,!0,!0),this.matter.world.enabled=!0,this.ground=this.matter.add.rectangle(0,1500,1e9,250,{isStatic:!0}),this.matter.world.add(this.ground),this.player=new _(this,800,1250,n.BARRY_SPRITE_SHEET),this.player.setVisible(!1),this.player.setSpeed(0);const h=this.add.sprite(100,1300.05,n.BARRY_SPRITE_SHEET).setDepth(c.OBJECT_MEDIUM).setDisplaySize(140,160).play("move");this.add.tween({targets:h,x:800,duration:1e3,ease:"Power2",onComplete:()=>{this.player.setSpeed(.5),this.player.setVisible(!0),h.destroy()}}),this.input.keyboard&&(this.cursors=this.input.keyboard.createCursorKeys()),this.rocketManager=new C(this,3),this.obstacleManager=new M(this,4),this.coinManager=new T(this,4),this.workerManager=new B(this,1),this.score=new S(this),this.cameras.main.startFollow(this.player,void 0,void 0,0,-800,450),this.input.addPointer(1),this.usingKey=this.usingTouch=!0}update(t,e){var s,a;this.background.update(),this.player.update(e),(null===(s=this.cursors.space)||void 0===s?void 0:s.isDown)?(this.usingKey=!0,this.usingTouch=!1,this.usingKey&&this.player.visible&&this.player.flying()):(null===(a=this.cursors.space)||void 0===a?void 0:a.isUp)&&this.usingKey&&this.player.falling(),this.input.pointer1.isDown?(this.usingKey=!1,this.usingTouch=!0,this.usingTouch&&this.player.visible&&this.player.flying()):this.usingTouch&&this.player.falling(),this.workerManager.update(e,this.player),this.workerManager.handleCollider(this.player),this.obstacleManager.update(e),this.rocketManager.update(e,this.player),this.score.add(e,this.player.getSpeed()/10),(this.obstacleManager.checkCollider(this.player)||this.rocketManager.checkCollider(this.player))&&(console.log("You die!"),this.score.saveHighScore(),this.coinManager.saveCoin(),this.scene.pause(),this.scene.launch(i.GAMEOVER,{score:this.score.getScore(),coin:this.coinManager.getCoin()})),this.coinManager.handleColliderWithPlayer(this.player),this.coinManager.setNewCoin(),this.score.getScore()>this.score.getLevel()&&(this.score.setLevel(this.score.getLevel()+100),this.player.setSpeed(this.evaluateSpeed(this.score.getScore()))),this.coinManager.update(e,this.player.getSpeed())}evaluateSmokeYPosition(t,e,s){return.5*s*Math.pow((t-1e3)/100,2)+1e3+e}evaluateSpeed(t){return Math.log10(.5*t/1e3+1)+.5}}class D extends a.Scene{constructor(){super({key:i.INIT})}preload(){this.load.image("loading-bg",o.LOGO2)}create(){}update(){this.scene.start(i.LOADING)}}class A extends a.Scene{constructor(){super({key:i.LOADING})}preload(){this.progressBar=this.add.graphics(),this.progressBar.setDepth(c.BACKGROUND_HIGH),this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"loading-bg").setDisplaySize(this.cameras.main.width,this.cameras.main.height),this.load.on("progress",(t=>{this.progressBar.clear(),this.progressBar.fillStyle(11583223,1),this.progressBar.fillRoundedRect(750,1250,1600*t,50,20),this.progressBar.lineStyle(5,0),this.progressBar.strokeRoundedRect(750,1250,1600,50,20)})),console.log("Load game assets"),this.load.image("logo","assets/images/JetpackJoyride.webp"),this.load.image("bg","assets/images/2.png"),console.log("Load game assets"),this.load.spritesheet(n.BARRY_SPRITE_SHEET,n.BARRY_SPRITE_SHEET,{frameWidth:93,frameHeight:95}),this.load.spritesheet(n.BARRY_BODY,n.BARRY_BODY,{frameWidth:32,frameHeight:32}),this.load.spritesheet(n.BARRY_HEAD,n.BARRY_HEAD,{frameWidth:32,frameHeight:32}),this.load.spritesheet(n.EXPLOSION,n.EXPLOSION,{frameWidth:64,frameHeight:64}),this.load.spritesheet(n.ORB_ANIM,n.ORB_ANIM,{frameWidth:62,frameHeight:42}),this.load.spritesheet(n.GLOW,n.GLOW,{frameWidth:128,frameHeight:128}),this.load.spritesheet(n.ZAP_EFFECT,n.ZAP_EFFECT,{frameWidth:256,frameHeight:117}),this.load.spritesheet(n.BULLET_FLASH,n.BULLET_FLASH,{frameWidth:64,frameHeight:64}),this.load.spritesheet(n.COIN_SPRITE,n.COIN_SPRITE,{frameWidth:32,frameHeight:32}),this.load.spritesheet(n.ALARM_LIGHT_EFFECT,n.ALARM_LIGHT_EFFECT,{frameWidth:422,frameHeight:384}),this.load.spritesheet(n.ROCKET,n.ROCKET,{frameWidth:32,frameHeight:32}),this.load.spritesheet(n.ROCKET_EFFECT,n.ROCKET_EFFECT,{frameWidth:64,frameHeight:64}),this.load.spritesheet(n.ROCKET_ALERT,n.ROCKET_ALERT,{frameWidth:64,frameHeight:64}),this.load.spritesheet(n.WORKER_1_BODY,n.WORKER_1_BODY,{frameWidth:32,frameHeight:32}),this.load.spritesheet(n.WORKER_2_BODY,n.WORKER_2_BODY,{frameWidth:32,frameHeight:32}),this.load.spritesheet(n.WORKER_1_HEAD,n.WORKER_1_HEAD,{frameWidth:32,frameHeight:32}),this.load.spritesheet(n.WORKER_2_HEAD,n.WORKER_2_HEAD,{frameWidth:32,frameHeight:32}),this.load.spritesheet(n.WORKER_FAT_BODY,n.WORKER_FAT_BODY,{frameWidth:32,frameHeight:32}),this.load.spritesheet(n.WORKER_TALL_BODY,n.WORKER_TALL_BODY,{frameWidth:32,frameHeight:32});for(let t=0;t<r.length;t++)this.load.text(`pattern${t}`,r[t]);for(const t of Object.values(o))this.load.image(t,t);for(const t of Object.values(l))this.load.audio(t,t)}create(){}update(){this.scene.start(i.MENU)}}class k extends a.Scene{constructor(){super({key:i.MENU})}preload(){}create(){this.add.image(2155,0,o.MID_ROOM).setOrigin(0,.125).setCrop(0,200,2021,1200).setDisplaySize(3233600/1200,256e4/1200),new I(this,500,!1),this.add.image(870,1300,o.DO_NOT_TOUCH).setDepth(c.OBJECT_VERYHIGH).setScale(1.7),this.logoGlow=this.add.image(1750,830,o.TITLE_GLOW).setDepth(c.BACKGROUND_VERYHIGH).setScale(3),this.logo=this.add.image(1800,800,o.TITLE).setDepth(c.BACKGROUND_VERYHIGH).setScale(1.5),this.input.keyboard&&(this.cursors=this.input.keyboard.createCursorKeys()),this.add.rectangle(0,0,500,1600,4660).setOrigin(0,0);let t=0;localStorage.getItem("highscore")&&(t=Number(localStorage.getItem("highscore"))),this.add.text(250,100,`BEST: ${Math.floor(t)}`,{fontSize:"50px",fontStyle:"bold"}).setOrigin(.5,.5).setStroke("#000000",1),new d(this,250,300,300,100,"SHOP",{fontSize:"50px",fontStyle:"bold"}).setInteractive(),new d(this,250,500,300,100,"POWER-UPS",{fontSize:"50px",fontStyle:"bold"}).setInteractive(),new d(this,250,700,300,100,"COSTUMES",{fontSize:"50px",fontStyle:"bold"}).setInteractive(),new d(this,250,900,300,100,"HALFBRICK",{fontSize:"50px",fontStyle:"bold"}).setInteractive(),this.rect=this.add.rectangle(2400,0,600,125,4660).setOrigin(0,0).setDepth(c.OBJECT_LOW);let e=0;localStorage.getItem("allCoin")&&(e=Number(localStorage.getItem("allCoin"))),this.coinRect=new d(this,2580,62.5,300,100,String(e),{fontSize:"50px",fontStyle:"bold"}),this.settingBtn=new d(this,2880,62.5,200,100,"Setting",{fontSize:"50px",fontStyle:"bold"}),this.settingBtn.setInteractive(),this.isSpaceClicked=!1,this.input.addPointer(1)}update(){if((this.input.pointer1.isDown||this.cursors.space&&this.cursors.space.isDown)&&!this.isSpaceClicked){this.isSpaceClicked=!0,this.tweens.add({targets:this.logo,alpha:0,duration:300}),this.tweens.add({targets:this.logoGlow,alpha:0,duration:300}),this.tweens.add({targets:this.rect,y:-150,duration:300}),this.tweens.add({targets:this.coinRect.getText(),y:-87.5,duration:300}),this.tweens.add({targets:this.coinRect.getRectangle(),y:-87.5,duration:300}),this.tweens.add({targets:this.settingBtn.getText(),y:-87.5,duration:300}),this.tweens.add({targets:this.settingBtn.getRectangle(),y:-87.5,duration:300});const t=this.scene;this.tweens.add({targets:this.cameras.main,scrollX:500,duration:500,onComplete:()=>{setTimeout((()=>{t.start(i.GAMEPLAY)}),200)}})}}}const v={title:"Jetpack Joyride",url:"https://github.com/leanhhuy0709/jetpack-joyride",version:"1.0",type:Phaser.AUTO,parent:"game",scene:[D,A,k,w,m],input:{keyboard:!0},physics:{default:"matter",matter:{gravity:{y:.95},debug:{showBody:!1,showStaticBody:!1,lineColor:16519680}}},width:3200,height:1600,scale:{mode:Phaser.Scale.ScaleModes.FIT,autoCenter:Phaser.Scale.Center.CENTER_BOTH,resizeInterval:1},backgroundColor:"#000000",render:{pixelArt:!0,antialias:!1}};class L extends a.Game{constructor(t){super(t)}}window.addEventListener("load",(()=>{new L(v)}))}},s={};function i(t){var a=s[t];if(void 0!==a)return a.exports;var h=s[t]={exports:{}};return e[t].call(h.exports,h,h.exports,i),h.exports}i.m=e,t=[],i.O=(e,s,a,h)=>{if(!s){var r=1/0;for(c=0;c<t.length;c++){for(var[s,a,h]=t[c],n=!0,o=0;o<s.length;o++)(!1&h||r>=h)&&Object.keys(i.O).every((t=>i.O[t](s[o])))?s.splice(o--,1):(n=!1,h<r&&(r=h));if(n){t.splice(c--,1);var l=a();void 0!==l&&(e=l)}}return e}h=h||0;for(var c=t.length;c>0&&t[c-1][2]>h;c--)t[c]=t[c-1];t[c]=[s,a,h]},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={179:0};i.O.j=e=>0===t[e];var e=(e,s)=>{var a,h,[r,n,o]=s,l=0;if(r.some((e=>0!==t[e]))){for(a in n)i.o(n,a)&&(i.m[a]=n[a]);if(o)var c=o(i)}for(e&&e(s);l<r.length;l++)h=r[l],i.o(t,h)&&t[h]&&t[h][0](),t[h]=0;return i.O(c)},s=self.webpackChunktype_project_template=self.webpackChunktype_project_template||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var a=i.O(void 0,[216],(()=>i(502)));a=i.O(a)})();